[
  {
    "Id": "1222252",
    "ThreadId": "538871",
    "Html": "I searched a lot about this and didnt find help.\r<br />\n<br />\nI am using Naudio and writing in C#.\r<br />\n<br />\nI am playing a voice in real-time.\r<br />\n<br />\nPlayCall is called when the PLAY button is clicked.\r<br />\n<br />\nStopCall is called when the STOP button is clicked.\r<br />\n<br />\nNormally, When the PlayCall function is running - The BufferedWaveProvider Buffer gaining and empties all the time.\r<br />\n<br />\nThe call.PCMArray keeps getting bigger (Recieves realtime voice), and the PlayerIndex is pointing to the part of the array that is being played right now.\r<br />\n<br />\nHere is the Code:\r<br />\n<br />\npublic void PlayCall(Call call)\r<br />\n{<br />\n<pre><code>byte[] mixedBuffer = new byte[320];\n\n// Check weather PlayerIndex is less than whole call size\nwhile (call.PlayerIndex &lt; call.PCMArray.Length)\n{\n\n    // Load 320 samples to the Buffer\n    for (int i = 0; i &lt; 320; i++)\n    {\n        mixedBuffer[i] = call.PCMArray[PlayerIndex + i];\n    }\n    call.PlayerIndex += 320;\n    Thread.Sleep(20);\n    try\n    {\n        AddSamples(mixedBuffer);\n        Waveout.Play();\n    }\n    catch (InvalidOperationException ex)\n    {\n        _bufferedWaveProvider.ClearBuffer();\n\n    }\n    finally\n    {\n         ClearByteArray(ref mixedBuffer);\n    }\n}</code></pre>\n\n}\r<br />\n<br />\n<br />\npublic void StopCall(Call call)\r<br />\n{<br />\n<pre><code>call.PlayerIndex = 0;\nWaveout.Stop();</code></pre>\n\n}\r<br />\n<br />\nWhile I am clicking Play and Stop, at one of the times I click PLAY, the Waveout just does'nt play the BufferedWaveProvider Buffer , out of nowhere.\r<br />\n<br />\ntherefore the BufferedWaveProvider Buffer keeps getting bigger (without emptying) and eventually is full - and then Buffer Null exception is Raised.\r<br />\n<br />\nDoes anybody knows why does it happen? I tried clearing the buffer when the exception is raised, but even after that the WaveOut.Play does'nt work and the Buffer is getting full again..\r<br />\n<br />\nHelp?? Please?<br />\n",
    "PostedDate": "2014-03-13T02:40:09.853-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]