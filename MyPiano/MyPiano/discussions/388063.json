[
  {
    "Id": "889990",
    "ThreadId": "388063",
    "Html": "\r\n<p>Hi, I'm trying to record the voice, and play each buffer as soon as it is received, like implementing a voice-echo application.</p>\r\n<p>But there is gaps in the output.</p>\r\n<p>Here is the code:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>    <span style=\"color:blue\">public</span> <span style=\"color:blue\">partial</span> <span style=\"color:blue\">class</span> Form1 : Form\n    {\n        <span style=\"color:blue\">private</span> WaveIn _waveIn = <span style=\"color:blue\">new</span> WaveIn();\n        <span style=\"color:blue\">private</span> WaveOut _waveOut = <span style=\"color:blue\">new</span> WaveOut();\n        BufferedWaveProvider _waveProvider = <span style=\"color:blue\">new</span> BufferedWaveProvider(<span style=\"color:blue\">new</span> WaveFormat());\n\n        <span style=\"color:blue\">public</span> Form1()\n        {\n            InitializeComponent();\n        }\n\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> btnRec_Click(<span style=\"color:blue\">object</span> sender, EventArgs e)\n        {\n            _waveIn.DataAvailable &#43;= waveIn_DataAvailable;\n            _waveIn.StartRecording();\n\n            _waveOut.Init(_waveProvider);\n            _waveOut.Play();\n        }\n\n        <span style=\"color:blue\">void</span> waveIn_DataAvailable(<span style=\"color:blue\">object</span> sender, WaveInEventArgs e)\n        {\n            _waveProvider.AddSamples(e.Buffer, 0, e.BytesRecorded);\n        }\n\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> btnStopRec_Click(<span style=\"color:blue\">object</span> sender, EventArgs e)\n        {\n            _waveIn.StopRecording();\n            _waveIn.Dispose();\n\n            _waveOut.Stop();\n            _waveOut.Dispose();\n        }\n    }\n</pre>\r\n</div>\r\n<p>Edited:</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>    <span style=\"color:blue\">public</span> <span style=\"color:blue\">partial</span> <span style=\"color:blue\">class</span> Form1 : Form\n    {\n        <span style=\"color:blue\">private</span> WaveIn _waveIn = <span style=\"color:blue\">new</span> WaveIn();\n        <span style=\"color:blue\">private</span> WaveOut _waveOut = <span style=\"color:blue\">new</span> WaveOut();\n        BufferedWaveProvider _waveProvider = <span style=\"color:blue\">new</span> BufferedWaveProvider(<span style=\"color:blue\">new</span> WaveFormat(11025, 8, 1));\n\n        <span style=\"color:blue\">public</span> Form1()\n        {\n            InitializeComponent();\n        }\n\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> btnRec_Click(<span style=\"color:blue\">object</span> sender, EventArgs e)\n        {\n            _waveIn.DataAvailable &#43;= waveIn_DataAvailable;\n            _waveIn.WaveFormat = <span style=\"color:blue\">new</span> WaveFormat(11025, 8, 1);\n            _waveIn.StartRecording();\n\n            _waveOut.Init(_waveProvider);\n            _waveOut.Play();\n        }\n\n        <span style=\"color:blue\">void</span> waveIn_DataAvailable(<span style=\"color:blue\">object</span> sender, WaveInEventArgs e)\n        {\n            _waveProvider.AddSamples(e.Buffer, 0, e.BytesRecorded);\n        }\n\n        <span style=\"color:blue\">private</span> <span style=\"color:blue\">void</span> btnStopRec_Click(<span style=\"color:blue\">object</span> sender, EventArgs e)\n        {\n            _waveIn.StopRecording();\n            _waveIn.Dispose();\n\n            _waveOut.Stop();\n            _waveOut.Dispose();\n        }\n    }\n\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p>After changing the format to 11025Hz, 8Bit, Mono, it plays well. It seems the problem is with high quality formats.</p>\r\n<p>Anybody knows a solution for this behavior?</p>\r\n<p>Thanks in advance.</p>\r\n",
    "PostedDate": "2012-07-24T13:14:12.967-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "893048",
    "ThreadId": "388063",
    "Html": "<p>I guess it could be the garbage collector getting in the way. Also, have you tried with WaveInEvent and WaveOutEvent?</p>",
    "PostedDate": "2012-07-30T06:57:59.353-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]