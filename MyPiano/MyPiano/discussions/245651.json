[
  {
    "Id": "564691",
    "ThreadId": "245651",
    "Html": "\r\n<p>Good day,</p>\r\n<p>I follow the instruction http://naudio.codeplex.com/wikipage?title=MP3&amp;ProjectName=naudio to play a .mp3 file, but always get exception on line &quot;throw new ArgumentException(&quot;Not a supported encoding&quot;);&quot; in public void SetWaveFormat(WaveFormat waveFormat)\r\n of DmoMediaType.cs&nbsp; I tired different .mp3 files, all gave me same error.</p>\r\n<p>waveFormat = &quot;NAudio.Wave.WaveFormatExtensible] = {32 bit PCM: 48kHz 2 channels wBitsPerSample:32 dwChannelMask:3 subFormat:00000003-0000-0010-8000-00aa00389b71 extraSize:22}&quot;</p>\r\n<p>&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; waveFormat.Encoding&nbsp;&nbsp;&nbsp; Extensible&nbsp;&nbsp;&nbsp; NAudio.Wave.WaveFormatEncoding</p>\r\n<p>-&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; waveFormat&nbsp;&nbsp;&nbsp; {32 bit PCM: 48kHz 2 channels wBitsPerSample:32 dwChannelMask:3 subFormat:00000003-0000-0010-8000-00aa00389b71 extraSize:22}&nbsp;&nbsp;&nbsp; NAudio.Wave.WaveFormat {NAudio.Wave.WaveFormatExtensible}<br>\r\n&#43;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; [NAudio.Wave.WaveFormatExtensible]&nbsp;&nbsp;&nbsp; {32 bit PCM: 48kHz 2 channels wBitsPerSample:32 dwChannelMask:3 subFormat:00000003-0000-0010-8000-00aa00389b71 extraSize:22}&nbsp;&nbsp;&nbsp; NAudio.Wave.WaveFormatExtensible<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; averageBytesPerSecond&nbsp;&nbsp;&nbsp; 384000&nbsp;&nbsp;&nbsp; int<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; AverageBytesPerSecond&nbsp;&nbsp;&nbsp; 384000&nbsp;&nbsp;&nbsp; int<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; BitsPerSample&nbsp;&nbsp;&nbsp; 32&nbsp;&nbsp;&nbsp; int<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; bitsPerSample&nbsp;&nbsp;&nbsp; 32&nbsp;&nbsp;&nbsp; short<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; BlockAlign&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp; int<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; blockAlign&nbsp;&nbsp;&nbsp; 8&nbsp;&nbsp;&nbsp; short<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Channels&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; int<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; channels&nbsp;&nbsp;&nbsp; 2&nbsp;&nbsp;&nbsp; short<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Encoding&nbsp;&nbsp;&nbsp; Extensible&nbsp;&nbsp;&nbsp; NAudio.Wave.WaveFormatEncoding<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; ExtraSize&nbsp;&nbsp;&nbsp; 22&nbsp;&nbsp;&nbsp; int<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; extraSize&nbsp;&nbsp;&nbsp; 22&nbsp;&nbsp;&nbsp; short<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; sampleRate&nbsp;&nbsp;&nbsp; 48000&nbsp;&nbsp;&nbsp; int<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; SampleRate&nbsp;&nbsp;&nbsp; 48000&nbsp;&nbsp;&nbsp; int<br>\r\n&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; waveFormatTag&nbsp;&nbsp;&nbsp; Extensible&nbsp;&nbsp;&nbsp; NAudio.Wave.WaveFormatEncoding</p>\r\n<p>Here are my codes:</p>\r\n<p>&nbsp;</p>\r\n<p>private void button1_Click(object sender, EventArgs e)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //Declarations required for audio out and the MP3 stream<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; waveOutDevice = new WasapiOut(AudioClientShareMode.Shared, 100);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; mainOutputStream = CreateInputStream(&quot;Lily.mp3&quot;);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; waveOutDevice.Init(mainOutputStream);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; waveOutDevice.Play();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; private WaveStream CreateInputStream(string fileName)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WaveChannel32 inputStream;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; if (fileName.EndsWith(&quot;.mp3&quot;))<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; WaveStream mp3Reader = new Mp3FileReader(fileName);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; inputStream = new WaveChannel32(mp3Reader);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; else<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; throw new InvalidOperationException(&quot;Unsupported extension&quot;);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return inputStream;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n<p>I spend many time on it, but just could not play, I am using VS 2008 EXPRESS Edition.</p>\r\n<p>Can you double check if anything missing in your example? Could you put an example of playback a .mp3 file in NAduioDemo project?</p>\r\n<p>Thanks,</p>\r\n<p>Hanson</p>\r\n",
    "PostedDate": "2011-02-11T08:22:16.683-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "564696",
    "ThreadId": "245651",
    "Html": "<p>there already is an example of MP3 playback in NAudio Demo, just load up an MP3 file and press play</p>\r\n<p>Mark</p>",
    "PostedDate": "2011-02-11T08:24:41.627-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "564959",
    "ThreadId": "245651",
    "Html": "<p>Thank you, your NAduioDemo works. I figured it out. The PC I am using does not support WASAPI.</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>",
    "PostedDate": "2011-02-11T16:05:38.2-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]